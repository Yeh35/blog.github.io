<!doctype html>
<html lang='kr'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='소개 junit은 단위 테스트를 작성하는 자바 개발자 93%가 사용하는 테스팅 프레임워크 이다. 테스트 코드를 작성해야하는
구성  JUnit Platform : 테스트를 실행시켜주는 런처를 제공, TestEngine API가 제공된다. Jupiter: JUnit 5를 지원하는 TestEngine API의 구연체 Vintage: JUnit 4, 3를 지원하는 TestEngine API의 구연체  의존성 추가  2.2&#43; 버전의 스프링 부트 프로젝트라면 spring-boot-starter-test에 기본으로 탑제가 되어있다. 아니라면&hellip; &lt;dependency&gt;&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;&lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;&lt;version&gt;5.5.2&lt;/version&gt;&lt;/dependency&gt;  기본 에노테이션은  @Test @BeforeAll / @AfterAll : 전체 @Test 메소드 전후 @BeforeEach / @AfterEach : 각 @Test 메소드 전후 @Disabled : @Test 메소드 실행 안하기  예제 import org.'>
<meta name='theme-color' content='#ffcd00'>
<meta name="google-site-verification" content="m5phnpm4z3C-bApLVELFYLomqYrSOnblcuSgJk1YFoQ" />

<meta property='og:title' content='Junit5 한번에 끝내기 • sango.h'>
<meta property='og:description' content='소개 junit은 단위 테스트를 작성하는 자바 개발자 93%가 사용하는 테스팅 프레임워크 이다. 테스트 코드를 작성해야하는
구성  JUnit Platform : 테스트를 실행시켜주는 런처를 제공, TestEngine API가 제공된다. Jupiter: JUnit 5를 지원하는 TestEngine API의 구연체 Vintage: JUnit 4, 3를 지원하는 TestEngine API의 구연체  의존성 추가  2.2&#43; 버전의 스프링 부트 프로젝트라면 spring-boot-starter-test에 기본으로 탑제가 되어있다. 아니라면&hellip; &lt;dependency&gt;&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;&lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;&lt;version&gt;5.5.2&lt;/version&gt;&lt;/dependency&gt;  기본 에노테이션은  @Test @BeforeAll / @AfterAll : 전체 @Test 메소드 전후 @BeforeEach / @AfterEach : 각 @Test 메소드 전후 @Disabled : @Test 메소드 실행 안하기  예제 import org.'>
<meta property='og:url' content='https://yeh35.github.io/blog.github.io/documents/java/junit5/'>
<meta property='og:site_name' content='sango.h'>
<meta property='og:type' content='article'><meta property='og:image' content='https://yeh35.github.io/blog.github.io/img/documents/java/junit5-icon.png'><meta property='article:section' content='documents'><meta property='article:tag' content='java'><meta property='article:tag' content='junit5'><meta property='article:tag' content='test'><meta property='article:published_time' content='2020-06-02T21:24:00&#43;09:00'/><meta property='article:modified_time' content='2020-06-02T21:24:00&#43;09:00'/><meta name='twitter:card' content='summary_large_image'><meta property='twitter:image' content='https://yeh35.github.io/blog.github.io/img/documents/java/junit5-icon.png'>

<meta name="generator" content="Hugo 0.66.0" />

  <title>Junit5 한번에 끝내기 • sango.h</title>
  <link rel='canonical' href='https://yeh35.github.io/blog.github.io/documents/java/junit5/'>
  
  
  <link rel='icon' href='/blog.github.io/favicon.ico'>
<link rel='stylesheet' href='/blog.github.io/assets/css/main.ab98e12b.css'><link rel='stylesheet' href='/blog.github.io/css/custom.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  

</head>
<body class='page type-documents has-cover has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'></a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/blog.github.io/'>
        <img src='https://avatars2.githubusercontent.com/u/46643699?s=460&amp;u=374c79ade497bda3a230e7ccc8693af69b94e766&amp;v=4'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/blog.github.io/'>
      sango.h
      </a>
    </h2>
    <div class='desc'>
    백엔드 개발에 관심이 많습니다.
    </div>
  </header>

</section>
<section class='widget widget-sidebar_menu sep-after'><nav id='sidebar-menu' class='menu sidebar-menu' aria-label=''>
    <div class='container'>
      <ul><li class='item'>
  <a href='/blog.github.io/documents/'>Document</a></li><li class='item'>
  <a href='/blog.github.io/til/'>TIL</a></li></ul>
    </div>
  </nav>

</section><section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'></h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud'><li>
        <a href='/blog.github.io/tags/api/' style='font-size:1em'>API</a>
      </li><li>
        <a href='/blog.github.io/tags/assert/' style='font-size:1em'>assert</a>
      </li><li>
        <a href='/blog.github.io/tags/aws/' style='font-size:1.0333333333333334em'>AWS</a>
      </li><li>
        <a href='/blog.github.io/tags/blog/' style='font-size:1em'>blog</a>
      </li><li>
        <a href='/blog.github.io/tags/book/' style='font-size:1em'>book</a>
      </li><li>
        <a href='/blog.github.io/tags/build/' style='font-size:1.1333333333333333em'>build</a>
      </li><li>
        <a href='/blog.github.io/tags/directory/' style='font-size:1em'>Directory</a>
      </li><li>
        <a href='/blog.github.io/tags/docker/' style='font-size:1.0666666666666667em'>docker</a>
      </li><li>
        <a href='/blog.github.io/tags/english/' style='font-size:1.0333333333333334em'>english</a>
      </li><li>
        <a href='/blog.github.io/tags/gradle/' style='font-size:1.1333333333333333em'>gradle</a>
      </li><li>
        <a href='/blog.github.io/tags/groovy/' style='font-size:1em'>groovy</a>
      </li><li>
        <a href='/blog.github.io/tags/http/' style='font-size:1em'>HTTP</a>
      </li><li>
        <a href='/blog.github.io/tags/hugo/' style='font-size:1em'>hugo</a>
      </li><li>
        <a href='/blog.github.io/tags/infra/' style='font-size:1.2666666666666666em'>infra</a>
      </li><li>
        <a href='/blog.github.io/tags/java/' style='font-size:1.1em'>java</a>
      </li><li>
        <a href='/blog.github.io/tags/jdbc/' style='font-size:1em'>JDBC</a>
      </li><li>
        <a href='/blog.github.io/tags/jpa/' style='font-size:1em'>JPA</a>
      </li><li>
        <a href='/blog.github.io/tags/junit5/' style='font-size:1em'>junit5</a>
      </li><li>
        <a href='/blog.github.io/tags/orm/' style='font-size:1em'>ORM</a>
      </li><li>
        <a href='/blog.github.io/tags/rest/' style='font-size:1em'>REST</a>
      </li><li>
        <a href='/blog.github.io/tags/review/' style='font-size:1em'>review</a>
      </li><li>
        <a href='/blog.github.io/tags/series/' style='font-size:1.1em'>series</a>
      </li><li>
        <a href='/blog.github.io/tags/slack/' style='font-size:1em'>Slack</a>
      </li><li>
        <a href='/blog.github.io/tags/spring/' style='font-size:1em'>Spring</a>
      </li><li>
        <a href='/blog.github.io/tags/spring-boot/' style='font-size:1.0666666666666667em'>spring-boot</a>
      </li><li>
        <a href='/blog.github.io/tags/start/' style='font-size:1em'>start</a>
      </li><li>
        <a href='/blog.github.io/tags/test/' style='font-size:1.0333333333333334em'>test</a>
      </li><li>
        <a href='/blog.github.io/tags/til/' style='font-size:2em'>TIL</a>
      </li><li>
        <a href='/blog.github.io/tags/web/' style='font-size:1em'>web</a>
      </li><li>
        <a href='/blog.github.io/tags/webhooks/' style='font-size:1em'>WebHooks</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label=''>
  <div class='container'>
    <a class='screen-reader-text' href='#content'></a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'></span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/blog.github.io/about-me/'>About Me</a>
      </li><li class='item'>
        <a href='/blog.github.io/documents/'>Document</a>
      </li><li class='item'>
        <a href='/blog.github.io/til/'>TIL</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'>
    
    <style>.widget-breadcrumbs li:after{content:'\2f '}</style>
  <section class='widget widget-breadcrumbs sep-after'>
    <nav id='breadcrumbs'>
      <ol><li><a href='/blog.github.io/'>sango.h</a></li><li><a href='/blog.github.io/documents/'>Document</a></li><li><span>Junit5 한번에 끝내기</span></li></ol>
    </nav>
  </section></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>sango.h</p><p class='desc site-desc'>sango.h는 snagoh와 c언어의 stdio.h의 합성어이다.</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='kr' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Junit5 한번에 끝내기</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'> </span>
  <time class='entry-date' datetime='2020-06-02T21:24:00&#43;09:00'>2020-06-02</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>

</span>


</div>


  </div>
</header>

  <div class='entry-cover'>
  <figure class='container cover-normal'>
    <img src='/blog.github.io/img/documents/java/junit5-icon.png'/>
    
  </figure>
</div>
  

  <div class='container entry-content'>
  <h2 id="소개">소개</h2>
<p><strong>junit은 단위 테스트를 작성하는 자바 개발자 93%가 사용하는 테스팅 프레임워크</strong> 이다.
테스트 코드를 작성해야하는</p>
<h2 id="구성">구성</h2>
<p><img src="/blog.github.io/img/documents/java/junit5-configuration.png" alt="junit5"></p>
<ul>
<li>JUnit Platform : 테스트를 실행시켜주는 런처를 제공, TestEngine API가 제공된다.</li>
<li>Jupiter: JUnit 5를 지원하는 TestEngine API의 구연체</li>
<li>Vintage: JUnit 4, 3를 지원하는 TestEngine API의 구연체</li>
</ul>
<h3 id="의존성-추가">의존성 추가</h3>
<ul>
<li>2.2+ 버전의 스프링 부트 프로젝트라면 <code>spring-boot-starter-test</code>에 기본으로 탑제가 되어있다.</li>
<li>아니라면&hellip;
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;
    &lt;version&gt;5.5.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></li>
</ul>
<h2 id="기본-에노테이션은">기본 에노테이션은</h2>
<ul>
<li>@Test</li>
<li>@BeforeAll / @AfterAll : 전체 @Test 메소드 전후</li>
<li>@BeforeEach / @AfterEach : 각 @Test 메소드 전후</li>
<li>@Disabled : @Test 메소드 실행 안하기</li>
</ul>
<h4 id="예제">예제</h4>
<pre><code>import org.junit.jupiter.api.*;

import static org.junit.jupiter.api.Assertions.*;

class StudyTest {

    @Test
    void test1() {
        System.out.println(&quot;test 1&quot;);
    }

    @Test
    void test2() {
        System.out.println(&quot;test 2&quot;);
    }

    @Test @Disabled
    void test3() {
        System.out.println(&quot;test 3&quot;);
    }

    @Test
    void create() {
        Study study = new Study();
        assertNotNull(study);
    }

    @BeforeAll
    static void beforAll() {
        System.out.println(&quot;before All&quot;);
    }

    @AfterAll
    static void afterAll() {
        System.out.println(&quot;after All&quot;);
    }

    @BeforeEach
    void beforeEach() {
        System.out.println(&quot;before Each&quot;);
    }

    @AfterEach
    void afterEach() {
        System.out.println(&quot;after Each&quot;);
    }
}
</code></pre><p>결과 :</p>
<pre><code>before All

before Each
after Each


before Each
test 1
after Each


before Each
test 2
after Each

after All
</code></pre><h2 id="테스트-이름-표시">테스트 이름 표시</h2>
<pre><code>@Test
void test1() {
    System.out.println(&quot;test 1&quot;);
}
</code></pre><p>위의 코드가 있을 때 <strong>기본 이름은 메소드명</strong> 이다.</p>
<h4 id="이름-표기-방법을-설정">이름 표기 방법을 설정</h4>
<p><code>@DisplayNameGeneration</code> 에노테이션을 사용하는데 <strong>Class와 Method에 붙여서 테스트 이름을 표기 방법을 설정</strong> 한다.
구현체는 <code>ReplaceUnderscores</code>에서 제공한다.</p>
<pre><code>@DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class)
class StudyTest {
    @Test
    void test_new_class() { 
        System.out.println(&quot;test 1&quot;);
    }
}
</code></pre><p>위와 같이 작성할 수 있고 테스트 이름은 <code>test new class</code>가 된다.</p>
<h4 id="이름-설정-추천-이모지-사용가능">이름 설정 (추천, 이모지 사용가능)</h4>
<p><code>@DisplayName</code> 에노테이션을 Method에 붙여서 테스트 이름 설정할 수 있다.
<code>@DisplayNameGeneration</code>보다 우선순위가 높다.</p>
<pre><code>@DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class)
class StudyTest {

    @DisplayName(&quot;테스트 \uD83D\uDE00&quot;)
    @Test
    void test_new_class() { 
        System.out.println(&quot;test 1&quot;);
    }
}
</code></pre><p><img src="/blog.github.io/img/documents/java/junit5-test-name.png" alt="test name"></p>
<ul>
<li><a href="https://kr.piliapp.com/facebook-symbols/">이모지 보고 싶다면</a></li>
<li><a href="https://junit.org/junit5/docs/current/user-guide/">이거 말고 다른 방법</a></li>
</ul>
<h2 id="assert-api">assert API</h2>
<p>테스트 코드라면 당연 Assert를 써서 값이 제대로 됬는지 확인해야한다.<br>
Java assert 예약어를 사용해도 되지만 그것보다는 좀 더 다양한 기능을 제공하는 Junit의 assert API들이 있다.<br>
JUnit5의 <code>org.junit.jupiter.api.Assertions.*</code>에 다양한 Assert들이 있다.<br>
자주 사용하는 것들만 보자면 &hellip;</p>
<ul>
<li>
<p>기본적인 assert</p>
<pre><code>assertEquals(&quot;예상하는 값&quot;, &quot;결과&quot;, ()-&gt;&quot;에러 메시지&quot;);
assertNotNull(new String(), ()-&gt;&quot;에러 메시지&quot;);
assertNull(null, ()-&gt;&quot;에러 메시지&quot;);
assertTrue(1 &gt; 0, ()-&gt;&quot;에러 메시지&quot;);
assertFalse(1 &lt; 0, ()-&gt;&quot;에러 메시지&quot;);
</code></pre><p>&ldquo;에러 메시지&quot;를 굳이 람다식으로 작성하지 않아도 되지만 에러 메시지의 연산이 있을 경우<br>
람다식으로 작성하여 함수화 시키면 실질적으로 에러 메세지를 보여줘야 할 때만 보여준다.</p>
</li>
<li>
<p>모든 assert 한번에 계산
assert를 사용하면 위의 assert가 False라는게 밝혀지만 아래 assert는 실행하지 않는데.. <br>
이걸 <code>assertAll()</code>로 해결할 수 있다.</p>
<pre><code>assertAll(() -&gt; {
    assertTrue(1 &lt; 0, ()-&gt;&quot;에러 메시지&quot;);
    assertFalse(1 &gt; 0, ()-&gt;&quot;에러 메시지&quot;);
});
</code></pre></li>
<li>
<p>Exception 체크
<code>assertThrows</code>을 사용하면 Exception을 체크할 수 있다.</p>
<pre><code>IllegalArgumentException exception = assertThrows(IllegalArgumentException.class, () -&gt; {
    throw new IllegalArgumentException(&quot;test&quot;);
});

assertEquals(&quot;test&quot;, exception.getMessage());
</code></pre></li>
<li>
<p>시작 체크
<code>assertTimeout</code>, <code>assertTimeoutPreemptively</code>을 사용하면 작동되는 시간을 측정할 수 있다.<br>
둘중에서 <code>assertTimeoutPreemptively</code>을 사용하는 것을 권장한다
타입아웃이 되는 경우 <code>assertTimeout</code>는 종료해버리지만 <code>assertTimeoutPreemptively</code>는 끝내버림으로 테스트 속도향상을 할 수 있다.
단, <strong>ThreadLocal을 제대로 모른다면 쓰지마라! 특히 transaction 같은 것에</strong></p>
<pre><code>assertTimeoutPreemptively(Duration.ofMillis(100), () -&gt; {
    Thread.sleep(1000);
});

assertTimeout(Duration.ofMillis(100), () -&gt; {
    Thread.sleep(1000);
});
</code></pre></li>
</ul>
<h2 id="테스트에-조건에-따라-실행">테스트에 조건에 따라 실행</h2>
<p>특정 OS, Java Version, 실행 변수등에 따라 실행할지 안할지 지정할 수 있다.</p>
<ul>
<li>
<p>코드로 하는 방법은 <code>org.junit.jupiter.api.Assumptions.*</code>의 API를 사용하면 된다.</p>
<pre><code>@Test
void test1() {
    assumeTrue(&quot;LOCAL&quot;.equals(System.getenv(&quot;TEST_ENV&quot;)));
    assertTrue(false); //TEST_ENV값이 LOCAL이 아닐 경우 실행 안함
}
</code></pre><p>혹은</p>
<pre><code>assumingThat(&quot;LOCAL&quot;.equals(System.getenv(&quot;TEST_ENV&quot;)), () -&gt; {
    assertTrue(false);
});
</code></pre></li>
<li>
<p>에노테이션으로 하는 방법은 <code>@Enabled___</code> 와 <code>@Disabled___</code>로 시작해</p>
<ul>
<li>OnOS</li>
<li>OnJre</li>
<li>IfSystemProperty</li>
<li>IfEnvironmentVariable
를 붙여서 쓰면 된다.</li>
</ul>
<pre><code>@EnabledOnOs({OS.WINDOWS, OS.MAC})
void test() {
    System.out.println(&quot;test 2&quot;);
}
</code></pre></li>
</ul>
<h2 id="테스트-태깅과-필터링">테스트 태깅과 필터링</h2>
<p>태깅은 우리의 테스트에 Tag를 걸 수 있다. 
<code>org.junit.jupiter.api.tag</code> 혹은 <code>tags</code>를 사용하면 된다.
<code>@Tag(&quot;fast&quot;) @Test void test1() { System.out.println(&quot;fast test&quot;); }</code>
이렇게 Tag는 필터를 통해 특정한 테스트만 실행할 수 있다.<br>
<img src="/blog.github.io/img/documents/java/junit5-test-tag-filter.png" alt="tag-filter"> <br>
이외에는</p>
<ul>
<li><a href="https://maven.apache.org/guides/introduction/introduction-to-profiles.html">https://maven.apache.org/guides/introduction/introduction-to-profiles.html</a></li>
<li><a href="https://junit.org/junit5/docs/current/user-guide/#running-tests-tag-expressions">https://junit.org/junit5/docs/current/user-guide/#running-tests-tag-expressions</a></li>
</ul>
<h2 id="커스텀-에노테이션">커스텀 에노테이션</h2>
<p>기본적은 JUnit5 jupiter 메타 에노테이션을 가지고 커스텀 에노테이션을 만들 수 있다.</p>
<pre><code>@Tag(&quot;custome&quot;)
@Test
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CustomeTest {
}
</code></pre><p>사용할때는</p>
<pre><code>@CustomeTest
void customeTest() {
    System.out.println(&quot;Custome Test&quot;);
}
</code></pre><h2 id="단순-테스트-반복">단순 테스트 반복</h2>
<p><code>@RepeatedTest</code> 에노테이션을 사용하면 된다.
단순하게는</p>
<pre><code>@RepeatedTest(value = 10)
void repeatedTest(RepetitionInfo repetitionInfo) {
    System.out.println(repetitionInfo.getCurrentRepetition() + &quot; of &quot; + repetitionInfo.getTotalRepetitions());
}
</code></pre><p><code>RepetitionInfo</code>라는 메소드를 통해 우리가 반복하려는 횟수와 토탈횟수등을 받을 수 있다.</p>
<p>테스트를 좀 더 이쁘게 꾸미려면&hellip;</p>
<pre><code>@DisplayName(&quot;반복&quot;)
@RepeatedTest(value = 10, name = &quot;{displayName} {currentRepetition} / {totalRepetitions}&quot;)
void repeatedTest(RepetitionInfo repetitionInfo) {
    System.out.println(repetitionInfo.getCurrentRepetition() + &quot; of &quot; + repetitionInfo.getTotalRepetitions());
}
</code></pre><p><code>name</code>에 <code>{displayName}</code>, <code>{currentRepetition}</code>, <code>{totalRepetitions}</code>에 변수를 이용해서 이름을 이쁘게 꾸밀 수 있다.</p>
<h2 id="파라미터를-테스트-반복">파라미터를 테스트 반복</h2>
<p><code>@ParameterizedTest</code>을 이용해서 값을 바꿔가며 테스트 할 수 있다.
단순하게는..</p>
<pre><code>@ParameterizedTest
@ValueSource(strings = {&quot;더위&quot;, &quot;추위&quot;, &quot;선선&quot;, &quot;비&quot;})
void parameterTest(String weather) {
    System.out.println(&quot;날씨: &quot; + value);
}
</code></pre><p>테스트의 이름을 꾸미고 싶다면 다음과 같이 에노테이션을 바꾸면 된다.</p>
<pre><code>@DisplayName(&quot;값 바꾸며 반복&quot;)
@ParameterizedTest(name = &quot;{displayName} {index}...{0}, {1}&quot;)
</code></pre><p><code>@ValueSource</code>말고도 다양한 에노테이션이 있다.</p>
<ul>
<li>@NullSource, @EmptySource, @NullAndEmptySource</li>
<li>@EnumSource</li>
<li>@MethodSource</li>
<li>@CvsSource</li>
<li>@CvsFileSource</li>
<li>@ArgumentSource
이런 값 에노테이션에는 <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests-argument-conversion-implicit">암묵적인 타입 변환</a>이 있다.</li>
</ul>
<h2 id="테스트-인스턴스">테스트 인스턴스</h2>
<p>기본적인 테스트 클래스의 인스턴스는 각 테스트 메소드마다 만들어지게 된다. (메소드가 100개면 100개..)
다음과 같은 코드를 실행하면 <code>commonValue</code>의 값이 2개 나와야 할거 같지만..</p>
<pre><code>public class ExampleTest {

    int commonValue = 0;

    @Test
    void test1() {
        commonValue++;
        System.out.println(this + &quot;.test1 : &quot; + commonValue);
    }

    @Test
    void test2() {
        commonValue++;
        System.out.println(this + &quot;.test2 : &quot; + commonValue);
    }

}
</code></pre><p>결과는 1이 나온다.</p>
<pre><code>me.sangoh.testing.ExampleTest@1c1bbc4e.test1 : 1
me.sangoh.testing.ExampleTest@247bddad.test2 : 1
</code></pre><p>왜 이런식으로 기본 동작이 각 메소드마다 인스턴스를 만드냐면 <strong>테스트 메소드를 독립적으로 실행하여 테스트 메소드간에 의존성을 제거하기 위함</strong> 이다.</p>
<h3 id="테스트-인스턴스-공유하기">테스트 인스턴스 공유하기</h3>
<p><code>@TestInstance(Lifecycle.PER_CLASS)</code> 에노테이션을 Class에 붙이면 테스트 메소드별로 생성하지 않고 하나의 인스턴스를 공유한다.</p>
<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)
public class ExampleTest {

    int commonValue = 0;

    @Test
    void test1() {
        commonValue++;
        System.out.println(this + &quot;.test1 : &quot; + commonValue);
    }

    @Test
    void test2() {
        commonValue++;
        System.out.println(this + &quot;.test2 : &quot; + commonValue);
    }
}
</code></pre><p>결과</p>
<pre><code>me.sangoh.testing.ExampleTest@45c7e403.test1 : 1
me.sangoh.testing.ExampleTest@45c7e403.test2 : 2
</code></pre><h2 id="테스트-순서">테스트 순서</h2>
<p>기본적으로 <strong>테스트 메소드의 실행 순서는 어떤 메소드가 먼저 실행될지 알 수 없다.</strong><br>
물론 Junit5부터는 메소드의 순서대로 작동이 되지만 하나의 메소드가 하나의 유닛테스트라면 <strong>테스트 순서에 의존해서도 신경을 써도 안된다</strong></p>
<p>하지만&hellip; 그럼에도 테스트 메소드 실행 순서를 정하는 방법은 있다.
그러려면 <code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)</code>을 사용해서 인스턴스를 공유하게 하고 
<code>@TestMethodOrder</code>을 순서 정하는 방법을 정하고 순서를 정의하면 된다.</p>
<ul>
<li>Alphanumeric</li>
<li>OrderAnnoation</li>
<li>Random</li>
</ul>
<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
public class ExampleTest {

    int commonValue = 0;

    @Order(1)
    @Test
    void test1() {
        commonValue++;
        System.out.println(this + &quot;.test1 : &quot; + commonValue);
    }

    @Order(2)
    @Test
    void test2() {
        commonValue++;
        System.out.println(this + &quot;.test2 : &quot; + commonValue);
    }
}
</code></pre><h2 id="junit-설정-파일">JUnit 설정 파일</h2>
<p>클래스패스 루트 (src/test/resources/)에 <code>junit-platform.properties</code>을 넣으면 설정파일로 인식한다.
안된다고 하면&hellip; 다음 이미지를 보고 Project <code>Test Resources</code>를 설정하자..
<a href="/blog.github.io/img/documents/java/junit5-test-resource.png">resource 설정</a></p>
<p>다음과 같은 것들을 설정 할 수 있다.</p>
<ul>
<li>
<p>테스트 인스턴스 라이프사이클 설정
<code>junit.jupiter.testinstance.lifecycle.default = per_class</code></p>
</li>
<li>
<p>확장팩 자동 감지 기능
<code>junit.jupiter.extensions.autodetection.enabled = true</code><br>
기본 값은 false</p>
</li>
<li>
<p>@Disabled 무시하고 실행하기
<code>junit.jupiter.conditions.deactivate = org.junit.*DisabledCondition</code></p>
</li>
<li>
<p>테스트 이름 표기 전략 설정</p>
<pre><code>junit.jupiter.displayname.generator.default = \ 
    org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores
</code></pre></li>
</ul>
<h2 id="junit-5-확장-모델httpsjunitorgjunit5docscurrentuser-guideextensions"><a href="https://junit.org/junit5/docs/current/user-guide/#extensions">JUnit 5 확장 모델</a></h2>
<p>JUnit 4의 확장 모델은 @RunWith(Runner), TestRule, MethodRule.<br>
JUnit 5의 확장 모델은 단 하나, Extension.</p>
<p>테스트에 확장팩을 등록 방법은</p>
<ul>
<li>선언적인 등록 @ExtendWith</li>
<li>프로그래밍 등록 @RegisterExtension</li>
<li>자동 등록 자바 ServiceLoader 이용</li>
</ul>
<p>확장팩을 만들면 할 수 있는 것들</p>
<ul>
<li>테스트 실행 조건</li>
<li>테스트 인스턴스 팩토리</li>
<li>테스트 인스턴스 후-처리기</li>
<li>테스트 매개변수 리졸버</li>
<li>테스트 라이프사이클 콜백</li>
<li>예외 처리</li>
</ul>
<p>테스트가 느린 메소드 찾는 확장팩</p>
<pre><code>public class FindSlowTestExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {

    private static final String START_TIME = &quot;START_TIME&quot;;

    @Override
    public void beforeTestExecution(ExtensionContext extensionContext) throws Exception {
        String testClassName = extensionContext.getRequiredTestClass().getName();
        String testMethodName = extensionContext.getRequiredTestMethod().getName();
        ExtensionContext.Store store = extensionContext.getStore(ExtensionContext.Namespace.create(testClassName + &quot;.&quot; + testMethodName));

        store.put(&quot;START_TIME&quot;, System.currentTimeMillis());
    }

    @Override
    public void afterTestExecution(ExtensionContext extensionContext) throws Exception {
        String testClassName = extensionContext.getRequiredTestClass().getName();
        String testMethodName = extensionContext.getRequiredTestMethod().getName();
        ExtensionContext.Store store = extensionContext.getStore(ExtensionContext.Namespace.create(testClassName + &quot;.&quot; + testMethodName));

        Long startTime = store.remove(START_TIME, long.class);
        long duration = System.currentTimeMillis() - startTime;

        if (duration &gt; 1000L) {
            System.out.printf(&quot;Pleas check method [%s] this method is vary slow\n&quot;, testMethodName);
        }
    }
}
</code></pre><p>선언적으로 사용하기</p>
<pre><code>@ExtendWith(FindSlowTestExtension.class)
class StudyTest {
</code></pre><p>혹은
프로그래밍적으로 추가하기</p>
<pre><code>class StudyTest {
    @RegisterExtension
    static FindSlowTestExtension findSlowTestExtension = new FindSlowTestExtension();

    ...test...
}
</code></pre><h2 id="junit34를-junit5로-마이그래이션">JUnit3,4를 JUnit5로 마이그래이션</h2>
<p>JUnit 3과 4 작성된 테스트 JUnit5의 <code>junit-platform</code>을 사용해서 실행할 수 있다.
단 기본 기능이 아님으로 <code>junit-jupiter-migrationsupport</code> 의존성을 추가 해야한다.</p>
<p>자세한 내용은 Pass..</p>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://www.inflearn.com/course/the-java-application-test/dashboard">백기선님의 인프런 강좌</a></li>
<li><a href="https://junit.org/junit5/docs/current/user-guide/">JUnit5 가이드</a></li>
</ul>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>tags: </span><a class='tag' href='/blog.github.io/tags/java/'>java</a>, <a class='tag' href='/blog.github.io/tags/test/'>test</a>, <a class='tag' href='/blog.github.io/tags/junit5/'>junit5</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blog.github.io/documents/infra/docker/docker-hub/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 </span>
        <span class='screen-reader-text'>: </span>Docker Hub</a>
    </div><div class='next-entry sep-before'>
      <a href='/blog.github.io/documents/java/lamdba-java/'>
        <span class='screen-reader-text'>: </span>람다식<span aria-hidden='true'> <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><script src='https://utteranc.es/client.js'
  repo='Yeh35/blog.github.io' issue-term='https://github.com/Yeh35/blog.github.io/test'
  crossorigin='anonymous' async>
</script>
</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label=''>
    <ul><li>
        <a href='https://github.com/Yeh35' target='_blank' rel='noopener'>
          <span class='screen-reader-text'></span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:jaws0910@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'></span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2019-2020 Snag Oh Yeh </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/blog.github.io/assets/js/"</script>

<script src='/blog.github.io/assets/js/main.c3bcf2df.js'></script><script src='/blog.github.io/js/custom.js'></script>

</body>

</html>

