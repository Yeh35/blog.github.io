<!doctype html>
<html lang='kr'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='해당 글은 의식의 흐름대로 작성 이 되어있다.
AWS 사이트에 가입을 굳이 설명할 필요는 없으므로 생략!
도메인 구입! Route53에서 도메인까지 구입할 수 있다.
누가 sangoh.com을 쓰고 있기에.. sangoh.net으로 하기로 했다.
이제 도메인을 삿으니 기다리면 된다.. (카드에 돈있는지 확인 필수)
echo 서버 만들기 도메인 승인 떨어질때 까지 할일이 없으니 echo 서버를 만들자! Spring Boot로 만들고 다음과 같은 코드를 추가하였다.
@RestControllerpublic class Controller {@GetMapping(&quot;/echo/{text}&quot;)@ResponseBodypublic String echo(@PathVariable(&quot;text&quot;) String text) {return text;}}이제 echo 서버를 도커 이미지로 꿉기!'>
<meta name='theme-color' content='#ffcd00'>
<meta name="google-site-verification" content="m5phnpm4z3C-bApLVELFYLomqYrSOnblcuSgJk1YFoQ" />

<meta property='og:title' content='AWS API 서버 띄우기 까지 - 2 • sango.h'>
<meta property='og:description' content='해당 글은 의식의 흐름대로 작성 이 되어있다.
AWS 사이트에 가입을 굳이 설명할 필요는 없으므로 생략!
도메인 구입! Route53에서 도메인까지 구입할 수 있다.
누가 sangoh.com을 쓰고 있기에.. sangoh.net으로 하기로 했다.
이제 도메인을 삿으니 기다리면 된다.. (카드에 돈있는지 확인 필수)
echo 서버 만들기 도메인 승인 떨어질때 까지 할일이 없으니 echo 서버를 만들자! Spring Boot로 만들고 다음과 같은 코드를 추가하였다.
@RestControllerpublic class Controller {@GetMapping(&quot;/echo/{text}&quot;)@ResponseBodypublic String echo(@PathVariable(&quot;text&quot;) String text) {return text;}}이제 echo 서버를 도커 이미지로 꿉기!'>
<meta property='og:url' content='https://yeh35.github.io/blog.github.io/documents/infra/aws/aws-study-start-2/'>
<meta property='og:site_name' content='sango.h'>
<meta property='og:type' content='article'><meta property='article:section' content='documents'><meta property='article:tag' content='AWS'><meta property='article:tag' content='infra'><meta property='article:published_time' content='2020-05-31T01:00:00&#43;09:00'/><meta property='article:modified_time' content='2020-05-31T01:00:00&#43;09:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.66.0" />

  <title>AWS API 서버 띄우기 까지 - 2 • sango.h</title>
  <link rel='canonical' href='https://yeh35.github.io/blog.github.io/documents/infra/aws/aws-study-start-2/'>
  
  
  <link rel='icon' href='/blog.github.io/favicon.ico'>
<link rel='stylesheet' href='/blog.github.io/assets/css/main.ab98e12b.css'><link rel='stylesheet' href='/blog.github.io/css/custom.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  

</head>
<body class='page type-documents has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'></a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/blog.github.io/'>
        <img src='https://avatars2.githubusercontent.com/u/46643699?s=460&amp;u=374c79ade497bda3a230e7ccc8693af69b94e766&amp;v=4'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/blog.github.io/'>
      sango.h
      </a>
    </h2>
    <div class='desc'>
    백엔드 개발에 관심이 많습니다.
    </div>
  </header>

</section>
<section class='widget widget-sidebar_menu sep-after'><nav id='sidebar-menu' class='menu sidebar-menu' aria-label=''>
    <div class='container'>
      <ul><li class='item'>
  <a href='/blog.github.io/documents/'>Document</a></li><li class='item'>
  <a href='/blog.github.io/til/'>TIL</a></li></ul>
    </div>
  </nav>

</section><section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'></h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud'><li>
        <a href='/blog.github.io/tags/api/' style='font-size:1em'>API</a>
      </li><li>
        <a href='/blog.github.io/tags/assert/' style='font-size:1em'>assert</a>
      </li><li>
        <a href='/blog.github.io/tags/aws/' style='font-size:1.0277777777777777em'>AWS</a>
      </li><li>
        <a href='/blog.github.io/tags/blog/' style='font-size:1em'>blog</a>
      </li><li>
        <a href='/blog.github.io/tags/book/' style='font-size:1em'>book</a>
      </li><li>
        <a href='/blog.github.io/tags/build/' style='font-size:1.1111111111111112em'>build</a>
      </li><li>
        <a href='/blog.github.io/tags/directory/' style='font-size:1em'>Directory</a>
      </li><li>
        <a href='/blog.github.io/tags/docker/' style='font-size:1.0555555555555556em'>docker</a>
      </li><li>
        <a href='/blog.github.io/tags/english/' style='font-size:1.0277777777777777em'>english</a>
      </li><li>
        <a href='/blog.github.io/tags/gradle/' style='font-size:1.1111111111111112em'>gradle</a>
      </li><li>
        <a href='/blog.github.io/tags/groovy/' style='font-size:1em'>groovy</a>
      </li><li>
        <a href='/blog.github.io/tags/http/' style='font-size:1em'>HTTP</a>
      </li><li>
        <a href='/blog.github.io/tags/hugo/' style='font-size:1em'>hugo</a>
      </li><li>
        <a href='/blog.github.io/tags/infra/' style='font-size:1.2222222222222223em'>infra</a>
      </li><li>
        <a href='/blog.github.io/tags/java/' style='font-size:1.1111111111111112em'>java</a>
      </li><li>
        <a href='/blog.github.io/tags/jdbc/' style='font-size:1.0277777777777777em'>JDBC</a>
      </li><li>
        <a href='/blog.github.io/tags/jpa/' style='font-size:1.0277777777777777em'>JPA</a>
      </li><li>
        <a href='/blog.github.io/tags/junit5/' style='font-size:1em'>junit5</a>
      </li><li>
        <a href='/blog.github.io/tags/orm/' style='font-size:1.0277777777777777em'>ORM</a>
      </li><li>
        <a href='/blog.github.io/tags/rest/' style='font-size:1em'>REST</a>
      </li><li>
        <a href='/blog.github.io/tags/review/' style='font-size:1em'>review</a>
      </li><li>
        <a href='/blog.github.io/tags/series/' style='font-size:1.0833333333333333em'>series</a>
      </li><li>
        <a href='/blog.github.io/tags/slack/' style='font-size:1em'>Slack</a>
      </li><li>
        <a href='/blog.github.io/tags/spring/' style='font-size:1em'>Spring</a>
      </li><li>
        <a href='/blog.github.io/tags/spring-boot/' style='font-size:1.0833333333333333em'>spring-boot</a>
      </li><li>
        <a href='/blog.github.io/tags/start/' style='font-size:1em'>start</a>
      </li><li>
        <a href='/blog.github.io/tags/test/' style='font-size:1.0277777777777777em'>test</a>
      </li><li>
        <a href='/blog.github.io/tags/til/' style='font-size:2em'>TIL</a>
      </li><li>
        <a href='/blog.github.io/tags/web/' style='font-size:1em'>web</a>
      </li><li>
        <a href='/blog.github.io/tags/webhooks/' style='font-size:1em'>WebHooks</a>
      </li><li>
        <a href='/blog.github.io/tags/%EA%B8%80%EC%93%B0%EA%B8%B0/' style='font-size:1em'>글쓰기</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label=''>
  <div class='container'>
    <a class='screen-reader-text' href='#content'></a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'></span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/blog.github.io/about-me/'>About Me</a>
      </li><li class='item'>
        <a href='/blog.github.io/documents/'>Document</a>
      </li><li class='item'>
        <a href='/blog.github.io/til/'>TIL</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'>
    
    <style>.widget-breadcrumbs li:after{content:'\2f '}</style>
  <section class='widget widget-breadcrumbs sep-after'>
    <nav id='breadcrumbs'>
      <ol><li><a href='/blog.github.io/'>sango.h</a></li><li><a href='/blog.github.io/documents/'>Document</a></li><li><span>AWS API 서버 띄우기 까지 - 2</span></li></ol>
    </nav>
  </section></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>sango.h</p><p class='desc site-desc'>sango.h는 snagoh와 c언어의 stdio.h의 합성어이다.</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='kr' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>AWS API 서버 띄우기 까지 - 2</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'> </span>
  <time class='entry-date' datetime='2020-05-31T01:00:00&#43;09:00'>2020-05-31</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>

</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  <p>해당 글은 <strong>의식의 흐름대로 작성</strong> 이 되어있다.</p>
<p>AWS 사이트에 가입을 굳이 설명할 필요는 없으므로 생략!</p>
<h3 id="도메인-구입">도메인 구입!</h3>
<p><a href="https://aws.amazon.com/ko/route53/">Route53</a>에서 도메인까지 구입할 수 있다.<br>
<img src="/blog.github.io/img/documents/infra/aws/route53-domain.png" alt="DNS_Basic">
누가 <code>sangoh.com</code>을 쓰고 있기에.. <code>sangoh.net</code>으로 하기로 했다.</p>
<p><img src="/blog.github.io/img/documents/infra/aws/route53-buy-domain.png" alt="DNS_Basic">
이제 도메인을 삿으니 기다리면 된다..  <br>
(카드에 돈있는지 확인 필수)</p>
<h3 id="echo-서버-만들기">echo 서버 만들기</h3>
<p>도메인 승인 떨어질때 까지 할일이 없으니 echo 서버를 만들자!
Spring Boot로 만들고 다음과 같은 코드를 추가하였다.</p>
<pre><code>@RestController
public class Controller {

    @GetMapping(&quot;/echo/{text}&quot;)
    @ResponseBody
    public String echo(@PathVariable(&quot;text&quot;) String text) {
        return text;
    }
}
</code></pre><h3 id="이제-echo-서버를-도커-이미지로-꿉기">이제 echo 서버를 도커 이미지로 꿉기!</h3>
<p>굳이 도커를 안해도 되지만 AWS EC2 서버에 쉽게? 배포하기 위해서이다.
다음과 같은 <code>DockerFile</code>을 만들고</p>
<pre><code>FROM openjdk:8-jre-alpine
VOLUME /tmp
EXPOSE 8080
ARG JAR_FILE=/build/libs/*.jar
ADD ${JAR_FILE} spring-boot.jar
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/spring-boot.jar&quot;]
</code></pre><p>전체 소스를 원하신다면 <a href="https://github.com/Yeh35/spring-boot-echo">여기 Github</a></p>
<p><code>gradlew bild</code> 명령어로 .jar 파일을 만들고 <code>docker build -t spring-echo .</code>로 Image를 만든다.<br>
잘 되는지 확인하기 위해 <code>docker run -d -p 8080:8080 spring-echo</code> 명령으로 컨테이너를 실행 후 
cmd창에 다음 같은 명령어를 입력한다.</p>
<pre><code>&gt;curl http://localhost:8080/echo/hoho
hoho
</code></pre><p>으흠, 잘 작동한다.!</p>
<h3 id="이미지도-docker-hub에-올리자">이미지도 Docker Hub에 올리자</h3>
<p><code>docker push spring-echo</code> 명령을 입력해서 Docker Hub에 이미지를 올렸다.<br>
원한다면 private 혹은 직접만든 저장소에 올려도 된다.</p>
<h3 id="aws-ec2-ubuntu서버-띄우기">AWS EC2 ubuntu서버 띄우기</h3>
<p>하는 방법은 검색하면 많이 나오니 설명은 pass</p>
<h3 id="aws-ec2-서버-보안그룹">AWS EC2 서버 보안그룹..</h3>
<p>인스턴스의 상세정보를 보다보면 보인그룹이라는 것으 보일 것이다.<br>
거기에 들어가서 인바운드 규칙에 우리가 사용할 8080포트를 열어줘야한다.</p>
<ul>
<li><a href="https://lsjsj92.tistory.com/550">https://lsjsj92.tistory.com/550</a></li>
</ul>
<h3 id="aws-ec2-접속하기">AWS EC2 접속하기</h3>
<p>window 로컬에 우분투를 설치하였다.</p>
<ul>
<li><a href="https://victorydntmd.tistory.com/62">https://victorydntmd.tistory.com/62</a></li>
</ul>
<p>Ubuntu의 home 디렉토리에서 <code>/mnt</code>폴더에 접근하면 window의 파일들을 볼 수 있다.<br>
<code>cp [원본파일] [복사될 파일이름]</code> 명령어로 .pem 파일을 복사 후 <code>ssh</code>명령으로 접속하면 된다.<br>
(이럴때는 맥을 쓰고 싶어진다.. 한번도 안써봤지만.. 아님 Window 서버로 열껄 그랬나&hellip;)</p>
<h3 id="ec2-우분투-서버에-접속-후">EC2 우분투 서버에 접속 후&hellip;</h3>
<ol>
<li><code>sudo apt-get update</code> 명령으로 설치된 파일들을 업데이트 해준다.</li>
<li><code>sudo apt-get install docker.io</code> 명령으로 도커를 설치해준다.</li>
<li><code>sudo docker run -p 8080:8080 -d [Docker Hub ID]/spring-echo</code> 컨테이너를 띄운다.</li>
<li><code>sudo docker ps</code> 명령으로 컨테이너가 잘 띄워젔는지 확인</li>
</ol>
<h3 id="도메인-연결">도메인 연결</h3>
<p>호스트 영역 &gt; 도메인 선택 &gt; 레코드 세팅 &gt; 레코드 세트 생성 &gt; ip 입력 
<img src="/blog.github.io/img/documents/infra/aws/route53-domain-set-1.png" alt="DNS_Basic"></p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>tags: </span><a class='tag' href='/blog.github.io/tags/infra/'>infra</a>, <a class='tag' href='/blog.github.io/tags/aws/'>AWS</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blog.github.io/documents/infra/aws/aws-study-start-1/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 </span>
        <span class='screen-reader-text'>: </span>AWS API 서버 띄우기 까지 - 1</a>
    </div><div class='next-entry sep-before'>
      <a href='/blog.github.io/documents/infra/docker/docker-hub/'>
        <span class='screen-reader-text'>: </span>Docker Hub<span aria-hidden='true'> <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yeh35.blog.io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label=''>
    <ul><li>
        <a href='https://github.com/Yeh35' target='_blank' rel='noopener'>
          <span class='screen-reader-text'></span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:jaws0910@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'></span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2019-2020 Snag Oh Yeh </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/blog.github.io/assets/js/"</script>

<script src='/blog.github.io/assets/js/main.c3bcf2df.js'></script><script src='/blog.github.io/js/custom.js'></script>

</body>

</html>

